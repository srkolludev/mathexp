{"version":3,"sources":["api/menuItem/menuItem.controller.js"],"names":["index","show","create","upsert","noOfMenuItem","offerAvailable","offerCount","destroy","getByCategory","customMenuitems","topTwelveMenuitemsBasedOnRating","recentMenuitems","sortedMenuitem","respondWithResult","res","statusCode","entity","status","json","patchUpdates","patches","apply","err","reject","save","removeEntity","remove","then","end","handleEntityNotFound","handleError","send","req","find","populate","sort","exec","catch","findById","params","id","menuItem","body","title","description","category","categoryTitle","thumb","extraIngredients","discount","price","available","_id","findOneAndUpdate","new","setDefaultsOnInsert","runValidators","i","rawData","categoryName","length","rawDataInObj","rawDataInObjInArray","result","aggregate","$group","data","$sum","push","labels","datasets","$gt","menuItems","count","product","console","log","$regex","menuitem","$options","message","limit","hendleError","sortkey","priceHighToLow","priceLowToHigh","newlyArrived","menudata"],"mappings":"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","file":"menuItem.controller.js","sourcesContent":["/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/menuItems              ->  index\n * POST    /api/menuItems              ->  create\n * GET     /api/menuItems/:id          ->  show\n * PUT     /api/menuItems/:id          ->  upsert\n * PATCH   /api/menuItems/:id          ->  patch\n * DELETE  /api/menuItems/:id          ->  destroy\n */\n\n'use strict';\n\nimport jsonpatch from 'fast-json-patch';\nimport MenuItem from './menuItem.model';\nimport Category from '../category/category.model';\n\n\nfunction respondWithResult(res, statusCode) {\n  statusCode = statusCode || 200;\n  return function(entity) {\n    if(entity) {\n      return res.status(statusCode).json(entity);\n    }\n    return null;\n  };\n}\n\nfunction patchUpdates(patches) {\n  return function(entity) {\n    try {\n      jsonpatch.apply(entity, patches, /*validate*/ true);\n    } catch(err) {\n      return Promise.reject(err);\n    }\n\n    return entity.save();\n  };\n}\n\nfunction removeEntity(res) {\n  return function(entity) {\n    if(entity) {\n      return entity.remove()\n        .then(() => {\n          res.status(204).end();\n        });\n    }\n  };\n}\n\nfunction handleEntityNotFound(res) {\n  return function(entity) {\n    if(!entity) {\n      res.status(404).end();\n      return null;\n    }\n    return entity;\n  };\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function(err) {\n    res.status(statusCode).send(err);\n  };\n}\n\n\n\n// Gets a list of MenuItems\nexport function index(req, res) {\n  return MenuItem.find().populate('image', 'PublicID').sort('-createdAt').exec()\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Gets a single MenuItem from the DB\nexport function show(req, res) {\n  return MenuItem.findById(req.params.id).populate('image', 'PublicID').exec()\n    .then(handleEntityNotFound(res))\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Creates a new MenuItem in the DB\nexport function create(req, res) {\n  var menuItem              = new MenuItem(req.body);\n  menuItem.title            = req.body.title;\n  menuItem.description      = req.body.description;\n  menuItem.category         = req.body.category;\n  menuItem.categoryTitle    = req.body.categoryTitle;\n  menuItem.thumb            = req.body.thumb;\n  menuItem.extraIngredients = req.body.extraIngredients;\n  if(req.body.discount<=0 || req.body.discount === null || !req.body.discount)\n  {\n    menuItem.discount = 0;\n  }\n  if(req.body.discount>0)\n  {\n    menuItem.discount = req.body.discount;\n  }\n  menuItem.price            = req.body.price;\n  menuItem.available        = req.body.available;\n  menuItem.save(function (err) {\n    if (err) {\n      return handleError(res);\n    } else {\n      res.json(menuItem); \n    }\n  });\n \n}\n\n// Upserts the given MenuItem in the DB at the specified ID\nexport function upsert(req, res) {\n  if(req.body._id) {\n    delete req.body._id;\n  }\n  return MenuItem.findOneAndUpdate({_id: req.params.id}, req.body, {new: true, upsert: true, setDefaultsOnInsert: true, runValidators: true}).exec()\n\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n\n//getting all categories's menuItem count\nexport function noOfMenuItem(req, res) {\n  var i;\n  var rawData       = [];\n  var categoryName  = [];\n  var length;\n  var rawDataInObj        = {};\n  var rawDataInObjInArray = [];\n  var result = {};\n  MenuItem.aggregate([\n    { $group : {\n      _id :'$categoryTitle',\n      data: { $sum: 1 },\n    }},\n    ]).\n  exec(function (err, menuItem) {\n    if (err) {\n      return handleError(res, err);\n    }\n    length = menuItem.length;\n    for(i=0;i<length;i++)\n    {\n    categoryName.push(menuItem[i]._id);\n    rawData.push(menuItem[i].data);\n    }\n    rawDataInObj = {\n      data:rawData\n    }\n    rawDataInObjInArray.push(rawDataInObj);\n    result = {\n      labels:categoryName,\n      datasets:rawDataInObjInArray\n    }\n    res.json(result);\n  });\n}\n \n//products on which offer available\nexport function offerAvailable(req, res) {\n  MenuItem.find({discount:{$gt:0}}).exec(function (err, menuItems) {\n    if (err) {\n      return handleError(res, err);\n    }\n    if (!menuItems) {\n      return res.status(404).send('Not Found');\n    }\n   \n    return res.json(menuItems);\n  });\n}\n\n//Count of products on which offer available\nexport function offerCount(req, res) {\n  var count = {};\n  MenuItem.count({discount:{$gt:0}}).exec(function (err, menuItems) {\n    if (err) {\n      return handleError(res, err);\n    }\n    if (!menuItems) {\n      return res.status(404).send('Not Found');\n    }\n   count = {\n    count:menuItems\n   }\n    return res.json(count);\n  });\n}\n\n\n\n// Deletes a MenuItem from the DB\nexport function destroy(req, res) {\n  return MenuItem.findById(req.params.id).exec()\n    .then(handleEntityNotFound(res))\n    .then(removeEntity(res))\n    .catch(handleError(res));\n}\n\n//get a list of menuitems by category id\nexport function getByCategory(req, res) {\n  MenuItem.find({'category':req.params.id}).populate('category', 'title').sort('asc').exec(function (err, product) {\n    if (err) {\n        console.log('err MenuItem: ' + err);\n      return handleError(res, err);\n    }\n    if (!product) {\n      return res.status(404).send('Not Found');\n    }\n    return res.json(product);\n  });\n}\n\n\n//Custom search by category name\nexport function customMenuitems(req,res){\n  //menuitem instead of menuitem name required\n  MenuItem.find({ title: { $regex:req.body.menuitem,$options: 'i' } } ).exec(function(err,data){\n    if(err){\n      res.status(400).send({\n        message:'Something Went Wrong.'\n      })\n    }\n    else{\n      res.json(data);\n    }\n  })\n}\n\nexport function topTwelveMenuitemsBasedOnRating(req,res){\n  MenuItem.find().sort('-rating').limit(12).exec(function(err,result){\n    if(err){\n      return hendleError(err,res);\n    }\n    if(result.length==0){\n      res.status({\n        message:'There is no such menuitem available matching this criteria.'\n      })\n    }\n    else{\n      res.json(result);\n    }\n  })\n}\n\n\n//Recent twelve menuitems \nexport function recentMenuitems(req,res){\n  MenuItem.find().sort('createdAt').limit(12).exec(function(err,result){\n    if(err){\n      return hendleError(err,res);\n    }\n    if(result.length==0){\n      res.status({\n        message:'There is no such menuitem available matching this criteria.'\n      })\n    }\n    else{\n      res.json(result);\n    }\n  })\n}\n\n//get all menuitems,sorted by sortkey\nexport function sortedMenuitem(req,res){\n  let sortkey;\n  if(req.body.priceHighToLow == 1){\n    sortkey = '-sortPrice';\n  }\n  if(req.body.priceLowToHigh == 1){\n    sortkey = 'sortPrice';\n  }\n  if(req.body.newlyArrived == 1){\n    sortkey = '-createdAt';\n  }\n    MenuItem.find().sort(sortkey).exec(function(err,menudata){\n      if(err){\n        return handleError(err,res);\n      }\n      else{\n        res.json(menudata)\n      }\n    })\n}"]}